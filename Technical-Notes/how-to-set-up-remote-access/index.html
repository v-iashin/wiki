
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.4">
    
    
      
        <title>How to Set up Remote Access - Tampere University ITC Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.358818c7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f0267088.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="deep-purple" data-md-color-accent="">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-set-up-remote-access" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Tampere University ITC Wiki" class="md-header-nav__button md-logo" aria-label="Tampere University ITC Wiki">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tampere University ITC Wiki
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              How to Set up Remote Access
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tampere University ITC Wiki" class="md-nav__button md-logo" aria-label="Tampere University ITC Wiki">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Tampere University ITC Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Meta
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Meta" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Meta
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Meta/how-to-contribute/" class="md-nav__link">
      How to Contribute to This Wiki?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Technical Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Technical Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Technical Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        How to Set up Remote Access
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      How to Set up Remote Access
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-using-a-proxy-server-ssh-forwardcctutfi" class="md-nav__link">
    Connecting using a proxy server (ssh-forward.cc.tut.fi)
  </a>
  
    <nav class="md-nav" aria-label="Connecting using a proxy server (ssh-forward.cc.tut.fi)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros-cons" class="md-nav__link">
    Pros &amp; Cons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-up" class="md-nav__link">
    How to set up
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-initialize-the-two-step-verification-remotely" class="md-nav__link">
    How to initialize the two-step verification remotely
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-tuni-vpn/" class="md-nav__link">
      Install TUNI VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tuni-narvi-cluster/" class="md-nav__link">
      TUNI Narvi Cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-using-a-proxy-server-ssh-forwardcctutfi" class="md-nav__link">
    Connecting using a proxy server (ssh-forward.cc.tut.fi)
  </a>
  
    <nav class="md-nav" aria-label="Connecting using a proxy server (ssh-forward.cc.tut.fi)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros-cons" class="md-nav__link">
    Pros &amp; Cons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-up" class="md-nav__link">
    How to set up
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-initialize-the-two-step-verification-remotely" class="md-nav__link">
    How to initialize the two-step verification remotely
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="how-to-set-up-remote-access">How to Set up Remote Access</h1>
<p>I assume that you have an Ubuntu 16.04 or 18.04 desktop (<strong>host</strong>) at your office and you would like to access it remotely from, let's say, your personal laptop (<strong>client</strong>).</p>
<p>The host machine will be reachable using a University-maintained laptop using University <code>TUNI-STAFF</code> WiFi or pre-installed VPN, for a self-maintained laptop you will need to do something extra.</p>
<!-- - [How to Set up Remote Access](#how-to-set-up-remote-access)
  - [Connecting using a proxy server (`ssh-forward.cc.tut.fi`)](#connecting-using-a-proxy-server-ssh-forwardcctutfi)
    - [Pros & Cons](#pros--cons)
    - [How to set up](#how-to-set-up)
    - [Hint](#hint)
    - [How to initialize the two-step verification remotely](#how-to-initialize-the-two-step-verification-remotely) -->

<h2 id="connecting-using-a-proxy-server-ssh-forwardcctutfi">Connecting using a proxy server (<code>ssh-forward.cc.tut.fi</code>)</h2>
<h3 id="pros-cons">Pros &amp; Cons</h3>
<ul>
<li>👍  Only the <code>ssh</code> traffic is going through the University facilities unlike using a VPN.</li>
<li>👍  Stable. The IP of the host machine will not change after reconnection and the connection is lost rarely as it uses the wired connection.</li>
<li>
<p>👍  Fast. The machine is using a Gigabit connection from the wall socket.</p>
</li>
<li>
<p>💩  You will need to contact <code>it-helpdesk@tuni.fi</code>. This might take some time.</p>
</li>
<li>💩  <code>ssh-forward.cc.tut.fi</code> doesn't support key-pair authentication. You can only login with passwords.</li>
<li>💩  Different log-in procedure depending on the network you are using. One-step on <code>roam.fi/eduroam/TUNI-STAFF</code>, two-step on other networks.</li>
<li>💩/👍  <code>ssh-forward.cc.tut.fi</code> has very limited disk space for each user (few MB). Therefore, can only be used as a proxy for your <code>ssh</code> connection <em>which is its main purpose</em>.</li>
</ul>
<h3 id="how-to-set-up">How to set up</h3>
<ol>
<li>Email <code>it-helpdesk@tuni.fi</code> to connect your office machine to <code>pit.cs.tut.fi</code> network. Specify the following things: a) the inventory number of the machine (on the sticker), b) MAC address of the socket in the machine you would like to use for the wired connection to the internet (you may have several Ethernet ports--you need only one), c) mention the Ethernet socket number from the wall that you will use. They will assign a fixed IP/FQDN and you will not need to type your credentials every 24 hours to have the internet connection.</li>
<li>At this point, you should have had received the response from <code>it-helpdesk@tuni.fi</code> and be able to connect to the internet using the socket you specified. If so, check your IP and type <code>host your_IP</code> to find out the FQDN. It should be something like <code>IP_reversed pointed to **********.pit.cs.tut.fi</code>.</li>
<li>Install <code>openssh-server</code> on your machine (host). This will allow <code>ssh</code> connection to this machine.</li>
<li>Next, make sure no WiFi connection connects automatically after the startup. Type <code>sudo nm-connection-editor</code> in terminal (or just go to <code>Edit connection</code> from the status menu on 16.04). Click on saved connections and go to <code>Preferences</code> (setting icon at the bottom) &gt; <code>General</code> &gt; uncheck the box.</li>
<li>Allow your <code>Wired connection</code> to automatically connect when available. <code>sudo nm-connection-editor</code>, go to <code>General</code> tab and make sure the box is checked.</li>
<li>Now your machine (host) should be reachable from TUNI-maintained computers connected to <code>TUNI-STAFF</code> WiFi or VPN directly via <code>ssh</code>. To connect to it from a self-maintained/personal device, you need to get an access to <code>ssh-forward.cc.tut.fi</code>. For this, proceed to <a href="https://www.tut.fi/omatunnus">tut.fi/omatunnus</a> (yes, <code>tut</code> not <code>tuni</code>) -&gt; <code>Services</code> -&gt; <code>System Access</code> (wait 10 sec) -&gt; search for and select <code>ssh-forward.cc.tut.fi</code>. You will get the confirmation email shortly.</li>
<li>Initialize the two-step verification at <code>ssh-forward.cc.tut.fi</code>. For this, <code>ssh</code> with your TUNI credentials to <code>ssh-forward.cc.tut.fi</code> while being connected to one of the University networks (<code>roam.fi/eduroam/TUNI-STAFF</code> or a university VPN)--you cannot do it from any other network but <a href="#how-to-initialize-the-two-step-verification-remotely">we got you here as well</a>. Type <code>google-authenticator</code>. It will ask you several questions and show a QR code (resize your window to see it). Answer the questions as follows:</li>
<li><code>Do you want authentication tokens...</code> -&gt; y</li>
<li><code>Do you want me to update your "/home/user/...</code> -&gt; y</li>
<li><code>Do you want to disallow multiple uses...</code> -&gt; n</li>
<li><code>By default, tokens are good for 30 seconds</code> -&gt; n</li>
<li><code>If the computer that you are logging into</code> -&gt; y</li>
<li>Install <code>Google Authenticator</code> app for your smartphone. It is going to be used for two-step authentication when non-university network is used (connecting from home internet). You don't need an account to use this service if it will ask--just find a button to scan a QR code. Once it is done it will create an entry with a 6-digit passcode which changes every 30 secs.</li>
<li>To connect to your machine, use <code>ssh -J your_tuni_username@ssh-forward.cc.tut.fi your_host_username@*********.pit.cs.tut.fi</code></li>
<li>If you are on a University network (<code>roam.fi/eduroam/TUNI-STAFF</code> or VPN), it will only ask for your TUNI and host passwords;</li>
<li>If you are using a non-University network, it will also ask for a <code>Verification Code</code> which is a temporal code from <code>Google Authenticator</code> app you installed on your smartphone.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Config the <code>ssh</code> connection in <code>~/.ssh/config</code>:
<div class="highlight"><pre><span></span><code><span class="n">Host</span> <span class="n">connection_name</span>
<span class="n">HostName</span> <span class="o">***********.</span><span class="n">pit</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">tut</span><span class="o">.</span><span class="n">fi</span>
<span class="n">User</span> <span class="n">your_username_at_the_host_machine</span>
<span class="n">ProxyCommand</span> <span class="n">ssh</span> <span class="n">your</span><span class="o">-</span><span class="n">tuni</span><span class="o">-</span><span class="n">username</span><span class="nd">@ssh</span><span class="o">-</span><span class="n">forward</span><span class="o">.</span><span class="n">cc</span><span class="o">.</span><span class="n">tut</span><span class="o">.</span><span class="n">fi</span> <span class="o">-</span><span class="n">W</span> <span class="o">%</span><span class="n">h</span><span class="p">:</span><span class="o">%</span><span class="n">p</span>
</code></pre></div>
After doing this, you will be able to do <code>ssh connection_name</code> to <code>ssh</code> directly to <code>*********.pit.cs.tut.fi</code>, forward ports, and transfer large files using <code>scp/rsync</code>. It is also useful if you are using <code>VSCode</code> or any other text editor which supports remote development. Additionally, it is handy if you would like to mount folders from the host to your client. You can use <code>sshfs connection_name:/path/to/remote_folder /path/to/local_folder</code>.</p>
</div>
<h3 id="how-to-initialize-the-two-step-verification-remotely">How to initialize the two-step verification remotely</h3>
<p>If you are setting up your connection remotely and you don't have an access to the university networks nor VPN at the moment, you still can do it. For this, you will need to apply for another TUT service. Proceed to <a href="https://www.tut.fi/omatunnus">tut.fi/omatunnus</a> (yes, <code>tut</code> not <code>tuni</code>) -&gt; <code>Services</code> -&gt; <code>System Access</code> (wait 10 sec) -&gt; search for <code>linux-ssh.cc.tut.fi</code> or <code>staff-linux.cc.tut.fi</code> depending on whether your are a student or a staff. When the access is granted (5 mins), <code>ssh</code> to one of them, and from there <code>ssh</code> to <code>ssh-forward.cc.tut.fi</code> -- no verification code will be asked as these servers are in the university network.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../Meta/how-to-contribute/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to Contribute to This Wiki?
              </div>
            </div>
          </a>
        
        
          <a href="../install-tuni-vpn/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Install TUNI VPN
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>